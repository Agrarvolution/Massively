var agrarvolution=agrarvolution||{};agrarvolution.consent=(()=>{const e=!0,t=!1,n=document.querySelector("#consent-template");function r(e,t,n){let r="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),r="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"}function a(e){let t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function o(t){i(t.target,e)}function i(e,t){const n=e.getAttribute("data-service"),o=n.charAt(0).toUpperCase()+n.slice(1);a(n+"-allowed")?(e.textContent=`${o} deaktivieren`,t&&r(`${n}-allowed`,0,-1)):(e.textContent=`${o} aktivieren`,t&&r(`${n}-allowed`,1,365)),t&&location.reload(!0)}function s(e){agrarvolution.parseText.updateService(e.target.getAttribute("data-service"),!0,!0)}return{generateEmbedConsentText:function(e,t,r){const a=e.toLowerCase(),o=n.content.cloneNode(!0);return o.querySelectorAll("span[data-service]").forEach((t=>{t.replaceWith(e)})),o.querySelector(".kg-consent p a").href=`${r}#${a}-datenschutzerklaerung`,o.querySelector(".kg-consent-interface a").href=t,o.querySelector(".kg-consent-interface button").setAttribute("data-service",a),o},createConsentButtonListener:function(e){document.querySelectorAll(`.consent-button[data-service="${e}"]`).forEach((e=>e.addEventListener("click",s)))},removeConsent:function(e){document.querySelectorAll(`[data-service="${e}"]`).forEach((e=>{const t=e.closest(".kg-consent-container");t&&t.parentNode.removeChild(t)}))},getCookie:a,setCookie:r,COOKIE_VALUE:1,COOKIE_DAYS_ALIVE:365,setupConsentButtons:function(){[...document.querySelectorAll(".kg-consent-option button")].forEach((e=>{i(e,t),e.addEventListener("click",o)}))}}})(),agrarvolution.videoHandling=(()=>{let e=[];const t={normal:{xsmall:"/content/images/videos/225/",small:"/content/images/videos/360/",medium:"/content/images/videos/480/",large:"/content/images/videos/720/",xlarge:"/content/images/videos/1080/"},half:{xsmall:"/content/images/videos/225/",small:"/content/images/videos/360/",medium:"/content/images/videos/225/",large:"/content/images/videos/225/",xlarge:"/content/images/videos/225/"}};function n(t){for(var n=0;n<e.length;n++)r(e[n],t)}function r(e,n){if(null==e||""!==e.src)return!1;if(!agrarvolution.util.isLinkOnsite(e.children[0].src))return!1;let r="normal";e.closest("kg-width-half")&&(r="half");for(let o=0;o<e.children.length;o++)e.children[o].src=a(t[r],n,e.children[o].src);e.load()}function a(e,t,n){let r=n.match(/[\d\w+-.]+$/g);return void 0!==r&&null!=r?e[t]+r[0]:n}return{setupBreakpoints:function(){e=document.querySelectorAll("video"),breakpoints({default:["2281px",null],xxlarge:["1681px","2280px"],xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:["361px","480px"],xxsmall:[null,"360px"]}),breakpoints.on("<=xsmall",(()=>{n("xsmall")})),breakpoints.on("<=small",(()=>{n("small")})),breakpoints.on("<=medium",(()=>{n("medium")})),breakpoints.on("<=xlarge",(()=>{n("large")})),breakpoints.on(">xsmall",(()=>{n("small")})),breakpoints.on(">small",(()=>{n("medium")})),breakpoints.on(">medium",(()=>{n("large")})),breakpoints.on(">xlarge",(()=>{n("xlarge")}))}}})(),agrarvolution.util={getFileType:function(e){try{if(void 0===e)return!1;if(""===e)return!1;const t=new URL(e).pathname.match(/\.([\w]){1,}$/gi);return t?t[0].replace(".","").trim():""}catch(e){console.warn(e)}},isLinkOnsite:function(e){if(void 0===e||null==e||""===e)return!1;if(e.match(/^\/.+/g))return!0;try{var t=new URL(e);if(location.host===t.host)return!0}catch(e){console.log(e)}return!1}},agrarvolution.parseText=(()=>{const e={gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jfif:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",jxl:"image/jxl",avif:"image/avif"},t=["svg","jpeg","jpg","png","gif"],n={normal:["300","400","500","600","700","800","1000","1200","1500"],half:["300","400","500","600","700"],gallery:["200","300","400","500","600"],bookmark:["300","400","500","600"],full:["400","500","600","700","800","900","1000","1150","1500","2000"],partner:["200","300","400"]},r={normal:"(min-width: 2281px) 1500px, (min-width: 1681px) 1200px, (min-width: 900px) 720px, (min-width: 481px) 75vw, (min-width: 376px) 90vw, 300px",half:"(min-width: 2281px) 700px, (min-width: 1681px) 600px, (min-width: 900px) 350px, (min-width: 737px) 55vw, (min-width: 481px) 75vw, (min-width: 376px) 90vw, 300px",gallery:"(min-width: 2281px) 700px, (min-width: 1681px) 600px, (min-width: 900px) 350px, (min-width: 737px) 55vw, (min-width: 481px) 75vw, (min-width: 376px) 90vw, 300px",bookmark:"(min-width: 2281px) 600px, (min-width: 1681px) 480px, (min-width: 737px) 300px, (min-width: 481px) 75vw, (min-width: 376px) 90vw, 300px",full:"(min-width: 2281px) 2000px, (min-width: 1681px) 1536px, (min-width: 1281px) 1152px, (min-width: 981px) 1056px, (min-width: 481px) 70vw, 100vw",partner:"(min-width: 1681px) 300px, (min-width: 737px) 200px, (min-width: 567px) 35vw, 200px"},a=document.querySelector("#instagram-template-card"),o=document.querySelector("#youtube-iframe-template"),i="www.youtube-nocookie.com",s="/embed/",c=document.querySelector("body"),l=document.querySelector("#instagram-script");let u=[],d=[],p={};function m(e){const t=document.createElement("figure");return t.classList.add("kg-card","kg-embed-card"),e&&""!==e&&t.classList.add(...e.trim().split(" ")),t}function g(e){const t=document.createElement("figcaption");return t.textContent=e,t}function f(n,a,o,i){const s=agrarvolution.util.getFileType(n),c=document.createElement("picture");let l=[],u="",d="";if(!agrarvolution.util.isLinkOnsite(n))return!1;d=y(n,i);for(let e in a)p(a[e]);return c.replaceWith(...l),c.appendChild(u),c;function p(a){if(e[a]&&!t.includes(a)){var c=d.replaceAll(s,a);return l.push(function(t,n,r){const a=document.createElement("source");return a.loading="lazy",a.classList.add("kg-image"),a.srcset=t,a.media=r,a.type=e[n],a}(c,a,r[i])),!0}if(!t.includes(a))return!1;let p=n.replace(s,a);if("svg"===a)u=h(p,"",o,i);else{let e=d.replaceAll(s,a);u=h(p,e,o,i)}}}function h(e,t,n,a){const o=document.createElement("img");agrarvolution.util.isLinkOnsite(e)&&(e=L(e,""));let i=a&&void 0!==r[a]?r[a]:"";return o.loading="lazy",o.src=e,o.srcset=t,o.sizes=i,o.alt=n||"",o.setAttribute("data-link",e),o}function x(e){const t=b(e.nextSibling);let n=o.content.cloneNode(!0);e.parentNode.prepend(n),n=e.parentNode.querySelector("iframe"),"P"===e.parentNode.tagName&&e.parentNode.replaceWith(n),n.src=function(e){if(void 0===e||null==e)return!1;const t=new URL(e);t.pathname.match(s)||(t.pathname=s+t.searchParams.get("v"),t.searchParams.delete("v"));return t.href}(e.href),n.setAttribute("data-figcaption",t.caption),n.setAttribute("data-classes",t.classes)}function v(e){e.src=function(e){if(void 0===e||null==e)return!1;const t=new URL(e);t.host!==i&&(t.host=i);return t.href}(e.src);const t=e.getAttribute("data-figcaption"),n=""!==t?"kg-card-hascaption":"",r=e.closest("figure.kg-card"),a=e.getAttribute("data-classes")||" "+n+" test";if(r)r.classList.add(...a.trim().split(" "));else{const t=m(a.trim());e.parentNode.insertBefore(t,e),t.appendChild(e)}if(e.parentNode.classList.add("kg-video-card"),!e.parentNode.classList.contains("kg-video")){const t=document.createElement("div");t.classList.add("kg-video"),e.parentNode.appendChild(t),t.appendChild(e)}""!==t&&e.closest(".kg-video-card").appendChild(g(t))}function w(e){e.setAttribute("data-src",e.getAttribute("data-instgrm-permalink")),e.setAttribute("data-instgrm-permalink",""),e.parentNode.prepend(agrarvolution.consent.generateEmbedConsentText("Instagram",function(e){if(e&&!1!==e){const t=new URL(e);return t.search="",t.href}return e}(e.getAttribute("data-instgrm-permalink")),"/datenschutzerklarung/"))}function k(e){e.setAttribute("data-src",e.src),e.src="";const t=agrarvolution.consent.generateEmbedConsentText("Youtube",function(e){if(e&&!1!==e){const t=new URL(e);t.host="www.youtube.com";const n=t.pathname.replace("/embed/","");return t.pathname="/watch",t.search="",t.searchParams.set("v",n),t.href}return e}(e.getAttribute("data-src")),"/datenschutzerklarung/");e.parentNode.classList.contains(".kg-video")?e.parentNode.parentNode.prepend(t):e.parentNode.prepend(t)}function b(e){if(""!==e&&void 0!==e&&null!=e&&"#text"===e.nodeName){const t=JSON.parse(e.textContent);return e.remove(),t}return{}}function y(e,t){let r="";for(let a in n[t])r+=L(e,n[t][a])+` ${n[t][a]}w,`;return r=r.replace(/,$/g,""),r}function L(e,t){return function(e,t){const n=e.match(/\/w\d+\//g);if(n&&""===t)return e.replace(/\/images\/size\/w\d+\//g,"/images/");n&&e.replace(/\/w\d+\//g,t);return e.replace("/images/","/images/size"+t)}(e,t=t&&t.match(/^\d+$/g)?`/w${t}/`:"")}function A(e,t,n){if(t){switch(e){case"youtube":u.forEach((e=>function(e){e.hasAttribute("data-src")&&(e.src=e.getAttribute("data-src"))}(e)));break;case"instagram":c.appendChild(l.content.cloneNode(!0)),n&&location.reload(!0)}agrarvolution.consent.removeConsent(e),agrarvolution.consent.setCookie(`${e}-allowed`,agrarvolution.consent.COOKIE_VALUE,agrarvolution.consent.COOKIE_DAYS_ALIVE)}else{switch(e){case"youtube":u.forEach((e=>k(e)));break;case"instagram":document.querySelectorAll(".instagram-media + script, script.instagram").forEach((e=>e.remove())),d.forEach((e=>w(e)))}agrarvolution.consent.createConsentButtonListener(e)}}return{parseLinks:function(){const e=[...document.querySelectorAll(".content > p > a:first-child")].filter((e=>!e.previousSibling)),t=document.querySelectorAll("iframe"),n=document.querySelector(".major h1");null!=n&&void 0!==n&&"linktree"!==n.textContent.toLowerCase()&&(e.filter((e=>{const t=new URL(e.href);return"www.youtube.com"===t.hostname||"www.youtube-nocookie.com"===t.hostname})).forEach((e=>x(e))),e.filter((e=>"www.instagram.com"===new URL(e.href).hostname)).forEach((e=>function(e){const t=b(e.nextSibling);let n=a.content.cloneNode(!0);e.parentNode.prepend(n),n=e.parentNode.querySelector(".kg-instagram"),"P"===e.parentNode.tagName&&e.parentNode.replaceWith(n),n.querySelector("blockquote").setAttribute("data-instgrm-permalink",`${e.href}?utm_source=ig_embed&amp;utm_campaign=loading`),n.classList.add(...t.classes||[]),t.caption&&(n.classList.add("kg-card-hascaption"),n.appendChild(g(t.caption)))}(e)))),u=[...t].filter((e=>{const t=new URL(e.src);return"www.youtube.com"===t.hostname||"www.youtube-nocookie.com"===t.hostname})),u.forEach((e=>v(e))),A("youtube",agrarvolution.consent.getCookie("youtube-allowed"),!1),d=[...document.querySelectorAll("blockquote.instagram-media")],d.forEach((e=>function(e){if("FIGURE"!==e.parentNode.tagName){const t=m("");e.parentNode.insertBefore(t,e),t.appendChild(e)}}(e))),A("instagram",agrarvolution.consent.getCookie("instagram-allowed"),!1),[...document.querySelectorAll("img.kg-image, .kg-gallery-image>img, .kg-partner-card img, .kg-bookmark-thumbnail img")].filter((e=>!!e.closest("figure:not(.kg-responsive)"))).forEach((e=>{const t=agrarvolution.util.getFileType(e.src);if(!agrarvolution.util.isLinkOnsite(e.src)||"svg"===t)return!1;const n=e.closest("figure.kg-card");let a="normal";n.classList.contains(".kg-width-full")?a="full":n.classList.contains(".kg-width-half")?a="half":n.classList.contains(".kg-gallery-card")?a="gallery":n.classList.contains(".kg-partner-card")?a="partner":n.classList.contains(".kg-bookmark-card")&&(a="bookmark"),p[t]?e.parentNode.replaceChild(f(e.src,[t,p[t]],e.alt,a),e):(e.srcset=y(e.src,a),e.sizes=r[a])}))},updateService:A}})(),agrarvolution.consent.setupConsentButtons(),agrarvolution.parseText.parseLinks(),agrarvolution.videoHandling.setupBreakpoints();